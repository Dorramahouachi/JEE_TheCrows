<body>
	<ui:composition xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		template="/template/template.xhtml" xmlns:p="http://primefaces.org/ui">
		<ui:include src="template/header.xhtml" />
		<ui:param name="page_name" value="Formulaire Evaluation" />
		<ui:define name="content">
			<div class="layout-content">
				<div class="p-grid ui-fluid">
					<div class="p-col-12 p-lg-12">
						<div class=" card p-grid">
							<div class="p-col-12 p-lg-9">
								<h1>Evaluation</h1>
								<h:form>
									<div class="p-grid">

										<h3>L'employé à evaluer:</h3>
										<p:selectOneMenu id="emplmenu"
											value="#{evaluationBean.employeId}">
											<f:selectItem itemLabel="Choisir Employé" itemValue="" />
											<f:selectItems value="#{evaluationBean.users}" var="user"
												itemLabel="#{user.firstname.concat(' ').concat(user.lastname)}"
												itemValue="#{user.id}" converter="generic" />
										</p:selectOneMenu>
										<h3>Type de l'evaluation:</h3>
										<p:selectOneMenu id="onemenu" value="#{evaluationBean.type}">
											<f:selectItem itemLabel="Choisir Type" itemValue="" />
											<f:selectItems value="#{data.evaluationTypes}" />
										</p:selectOneMenu>
										<h3>Commentaire:</h3>
										<p:inputText id="area" value="#{evaluationBean.description}" />
										<div class="card p-lg-12"
											style="margin-top: 15px; border: 1px solid black">
											<h2>Critéres:</h2>

											<p:repeat value="#{criteriaBean.criterias}" var="criteria"
												id="crit">
												<h:form id="criteres">
													<h:outputText id="area" value="#{criteria.criteria}:"
														style="font-weight:bold" />
													<p:selectOneRadio unselectable="true"
														value="#{criteria.note}" converter="javax.faces.Integer">
														<!--  <f:ajax event="change" render="area"
															listener="#{evaluationBean.setNote(criteria.id)}" />  -->
														<f:selectItem itemLabel="Niveau 1" itemValue="1" />
														<f:selectItem itemLabel="Niveau 2" itemValue="2" />
														<f:selectItem itemLabel="Niveau 3" itemValue="3" />
														<f:selectItem itemLabel="Niveau 4" itemValue="4" />
														<f:selectItem itemLabel="Niveau 5" itemValue="5" />
													</p:selectOneRadio>
												</h:form>
											</p:repeat>
										</div>
										<p:commandButton value="Envoyer Evaluation"
											class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left secondary-button"
											action="#{evaluationBean.addEvaluation()}"
											style="margin-top:20px;">
											<p:confirm header="Confirmation" message="Vous etes sure?"
												icon="pi pi-exclamation-triangle" />
										</p:commandButton>
										<p:confirmDialog global="true" showEffect="fade"
											hideEffect="fade">
											<p:commandButton value="OUI"
												styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
											<p:commandButton value="NON" type="button"
												styleClass="ui-confirmdialog-no" icon="pi pi-times" />
										</p:confirmDialog>
									</div>

								</h:form>


							</div>
							<div class=" p-lg-3">

								<p:commandButton value="Ajouter Critére" type="button"
									onclick="PF('dlg2').show();" />
								<p:commandButton value="Afficher Liste des Critéres"
									type="button" onclick="PF('dlg3').show();" />
								<p:dialog header="Liste des critéres" widgetVar="dlg3"
									modal="true">
									<h:form>
										<p:dataTable value="#{criteriaBean.allCriterias}" var="criteria"
											id="listCr" editable="true">
											<p:column>
												<h:outputText value="#{criteria.criteria}" />
											</p:column>
											<p:column>
												<p:commandButton value="Supprimer"
													action="#{criteriaBean.deleteCriteria(criteria.id)}"
													/>
												<!-- <p:commandButton value="Modfier"
													action="#{criteriaBean.modifierCritere(criteria.id, criteria.criteria)}"
													update="listCr" /> -->
											</p:column>
										</p:dataTable>
									</h:form>
								</p:dialog>

								<p:dialog header="Ajouter Critére" widgetVar="dlg2" modal="true">
									<h:form id="inputCrit">
										<p:inputText value="#{criteriaBean.criteriaName}" />
										<p:commandButton value="Ajouter"
											action="#{criteriaBean.addCriteria()}" />
									</h:form>
								</p:dialog>


							</div>
						</div>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
